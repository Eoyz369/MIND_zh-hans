<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta id="url_prefix" data-value="{{url_prefix}}">

	<link rel="manifest" href="{{ url_for('static', filename='json/pwa_manifest.json') }}">
	<link rel="apple-touch-icon" href="{{ url_for('static', filename='img/favicon.svg') }}">
	<meta name="apple-mobile-web-app-status-bar" content="#6b6b6b">
	<meta name="theme-color" content="#6b6b6b">

	<link rel="shortcut icon" href="{{ url_for('static', filename='img/favicon.svg') }}" type="image/x-icon">

	<link rel="stylesheet" href="{{ url_for('static', filename='css/general.css') }}">
	<link rel="stylesheet" href="{{ url_for('static', filename='css/admin.css') }}">

	<script src="{{ url_for('static', filename='js/general.js') }}" defer></script>
	<script src="{{ url_for('static', filename='js/admin.js') }}" defer></script>

	<link rel="stylesheet" href="{{ url_for('static', filename='css/language.css') }}">

	<script src="{{ url_for('static', filename='js/admin-zh-hans.js') }}" defer></script>

	<title data-lang="title">管理 - MIND</title>

</head>
</head>

<body>
	<div class="language-selector">
		<a href="#" onclick="switchLanguage('en')">English</a> /
		<a href="#" onclick="switchLanguage('zh')">中文</a>
	</div>
	<header>
		<img src="{{ url_for('static', filename='img/favicon.svg') }}" alt="">

	</header>
	<main>
		<section class="action-buttons">
			<button id="save-button" title="Save Settings" type="submit" form="settings-form">
				<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="512" height="512">
					<path d="M12,10a4,4,0,1,0,4,4A4,4,0,0,0,12,10Zm0,6a2,2,0,1,1,2-2A2,2,0,0,1,12,16Z" />
					<path
						d="M22.536,4.122,19.878,1.464A4.966,4.966,0,0,0,16.343,0H5A5.006,5.006,0,0,0,0,5V19a5.006,5.006,0,0,0,5,5H19a5.006,5.006,0,0,0,5-5V7.657A4.966,4.966,0,0,0,22.536,4.122ZM17,2.08V3a3,3,0,0,1-3,3H10A3,3,0,0,1,7,3V2h9.343A2.953,2.953,0,0,1,17,2.08ZM22,19a3,3,0,0,1-3,3H5a3,3,0,0,1-3-3V5A3,3,0,0,1,5,2V3a5.006,5.006,0,0,0,5,5h4a4.991,4.991,0,0,0,4.962-4.624l2.16,2.16A3.02,3.02,0,0,1,22,7.657Z" />
				</svg>
			</button>
			<button id="logout-button" aria-label="Log out of MIND" title="Logout">
				<svg xmlns="http://www.w3.org/2000/svg" version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink"
					xmlns:svgjs="http://svgjs.com/svgjs" width="256" height="256" x="0" y="0" viewBox="0 0 24 24"
					style="enable-background:new 0 0 512 512" xml:space="preserve">
					<g>
						<path
							d="M11.476,15a1,1,0,0,0-1,1v3a3,3,0,0,1-3,3H5a3,3,0,0,1-3-3V5A3,3,0,0,1,5,2H7.476a3,3,0,0,1,3,3V8a1,1,0,0,0,2,0V5a5.006,5.006,0,0,0-5-5H5A5.006,5.006,0,0,0,0,5V19a5.006,5.006,0,0,0,5,5H7.476a5.006,5.006,0,0,0,5-5V16A1,1,0,0,0,11.476,15Z">
						</path>
						<path
							d="M22.867,9.879,18.281,5.293a1,1,0,1,0-1.414,1.414l4.262,4.263L6,11a1,1,0,0,0,0,2H6l15.188-.031-4.323,4.324a1,1,0,1,0,1.414,1.414l4.586-4.586A3,3,0,0,0,22.867,9.879Z">
						</path>
					</g>
				</svg>
			</button>
		</section>
		<div class="form-container">
			<form id="settings-form">
				<h2 data-lang="auth-title">身份验证</h2>
				<div class="settings-table-container">
					<table class="settings-table">
						<tbody>
							<tr>
								<td><label for="allow-new-accounts-input" data-lang="allow-new-accounts-label">允许新账户</label></td>
								<td>
									<input type="checkbox" id="allow-new-accounts-input">
									<p data-lang="allow-new-accounts-desc">允许用户注册新账户。管理员始终可以从此面板添加新账户。</p>
								</td>
							</tr>
							<tr>
								<td><label for="login-time-input" data-lang="login-time-label">登录时间</label></td>
								<td>
									<div class="number-input">
										<input type="number" id="login-time-input" min="1" max="43200" required>
										<p>Min</p>
									</div>
									<p data-lang="login-time-desc1">用户在重新验证之前保持登录状态的时间。介于1分钟到1个月之间。</p>
									<p data-lang="login-time-desc2">新值适用于新验证的用户。</p>
								</td>
							</tr>
							<tr>
								<td><label for="login-time-reset-input" data-lang="login-time-reset-label">登录时间触发器</label></td>
								<td>
									<select id="login-time-reset-input">
										<option value="true" data-lang="after-last-use">上次使用后</option>
										<option value="false" data-lang="after-login">登录后</option>
									</select>
									<p data-lang="login-time-reset-desc">登录计时器应从何时开始：从上次使用MIND开始或从用户验证时开始</p>
								</td>
							</tr>
						</tbody>
					</table>
				</div>
				<h2 data-lang="logging-title">日志记录</h2>
				<div class="settings-table-container">
					<table class="settings-table">
						<tbody>
							<tr>
								<td><label for="log-level-input" data-lang="log-level-label">日志级别</label></td>
								<td>
									<select id="log-level-input">
										<option value="20" data-lang="log-level-info">信息</option>
										<option value="10" data-lang="log-level-debug">调试</option>
									</select>
								</td>
							</tr>
						</tbody>
					</table>
				</div>
				<div class="database-container">
					<button id="download-logs-button" type="button" data-lang="download-logs-button">下载调试日志</button>
				</div>
			</form>
			<form id="hosting-form">
				<h2 data-lang="hosting-title">托管</h2>
				<div class="settings-table-container">
					<table class="settings-table">
						<tbody>
							<tr>
								<td><label for="host-input" data-lang="host-label">主机</label></td>
								<td>
									<input type="text" id="host-input" required>
									<p data-lang="host-desc">有效的IPv4地址（默认是'0.0.0.0'用于所有可用接口）。</p>
								</td>
							</tr>
							<tr>
								<td><label for="port-input" data-lang="port-label">端口</label></td>
								<td>
									<input type="number" id="port-input" min="1" max="65535" required>
									<p data-lang="port-desc">用于访问Web UI的端口（默认是'8080'）。</p>
								</td>
							</tr>
							<tr>
								<td><label for="url-prefix-input" data-lang="url-prefix-label">URL前缀</label></td>
								<td>
									<input type="text" id="url-prefix-input">
									<p data-lang="url-prefix-desc">用于反向代理支持（默认是空的）。</p>
								</td>
							</tr>
						</tbody>
					</table>
					<button type="submit" id="save-hosting-button" data-lang="save-hosting-button">保存并重启</button>
				</div>
				<p data-lang="hosting-note1">重要：保存托管设置后，必须在1分钟（60秒）内登录管理面板以保持新托管设置。否则，MIND将恢复更改并返回旧托管设置。</p>
				<p data-lang="hosting-note2">查看 <a
						href="https://casvt.github.io/MIND/settings/admin_settings#hosting">更多信息，</a> for
						请参阅文档。</p>
			</form>
			<h2 data-lang="user-management-title">用户管理</h2>
			<div class="add-user-container">
				<button id="add-user-button">
					<svg xmlns="http://www.w3.org/2000/svg" version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink"
						xmlns:svgjs="http://svgjs.com/svgjs" width="256" height="256" x="0" y="0" viewBox="0 0 512 512"
						style="enable-background:new 0 0 512 512" xml:space="preserve">
						<g>
							<g>
								<path
									d="M480,224H288V32c0-17.673-14.327-32-32-32s-32,14.327-32,32v192H32c-17.673,0-32,14.327-32,32s14.327,32,32,32h192v192   c0,17.673,14.327,32,32,32s32-14.327,32-32V288h192c17.673,0,32-14.327,32-32S497.673,224,480,224z">
								</path>
							</g>
						</g>
					</svg>
				</button>
			</div>
			<div class="user-table-container">
				<form id="add-user-form"></form>
				<table id="user-table">
					<thead>
						<th data-lang="user-table-user">用户</th>
						<th></th>
						<th data-lang="user-table-actions">操作</th>
					</thead>
					<tbody id="add-user-row" class="hidden">
						<tr>
							<td>
								<input type="text" id="new-username-input" form="add-user-form" placeholder="Username"
									required>
							</td>
							<td>
								<input type="password" id="new-password-input" form="add-user-form"
									placeholder="Password" required>
							</td>
							<td>
								<button type="submit" form="add-user-form">
									<svg xmlns="http://www.w3.org/2000/svg" version="1.1"
										xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:svgjs="http://svgjs.com/svgjs"
										width="256" height="256" x="0" y="0" viewBox="0 0 512 512"
										style="enable-background:new 0 0 512 512" xml:space="preserve">
										<g>
											<g>
												<path
													d="M480,224H288V32c0-17.673-14.327-32-32-32s-32,14.327-32,32v192H32c-17.673,0-32,14.327-32,32s14.327,32,32,32h192v192   c0,17.673,14.327,32,32,32s32-14.327,32-32V288h192c17.673,0,32-14.327,32-32S497.673,224,480,224z">
												</path>
											</g>
										</g>
									</svg>
								</button>
							</td>
						</tr>
					</tbody>
					<tbody id="user-list">
					</tbody>
				</table>
			</div>
			<h2 data-lang="database-title">数据库</h2>
			<div class="database-container">
				<button id="download-db-button" data-lang="download-db-button">下载数据库</button>
			</div>
			<form id="upload-database-form">
				<div class="settings-table-container">
					<table class="settings-table">
						<tbody>
							<tr>
								<td><label for="database-file-input" data-lang="database-file-label">数据库文件
										</label></td>
								<td><input type="file" id="database-file-input" required></td>
							</tr>
							<tr>
								<td><label for="copy-hosting-input" data-lang="copy-hosting-label">保留托管设置</label></td>
								<td>
									<input type="checkbox" id="copy-hosting-input">
									<p data-lang="copy-hosting-desc">保留当前托管设置，而不是使用上传的数据库中的设置。</p>
								</td>
							</tr>
						</tbody>
					</table>
				</div>
				<button type="submit" id="upload-db-button" data-lang="upload-db-button">导入数据库</button>
				<p data-lang="upload-note1">重要：上传备份后，必须在1分钟（60秒）内登录管理面板以保持新数据库文件。否则，MIND将恢复上传并返回旧数据库。</p>
				<p data-lang="upload-note2">查看 <a
						href="https://casvt.github.io/MIND/general_info/admin_panel#database">更多信息，</a> 请参阅文档。</p>
			</form>
			<h2 data-lang="power-title">电源</h2>
			<div class="database-container">
				<button id="restart-button" data-lang="restart-button">重启</button>
				<button id="shutdown-button" data-lang="shutdown-button">关机</button>
			</div>
		</div>
	</main>


</body>

</html>