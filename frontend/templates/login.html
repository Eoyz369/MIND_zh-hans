<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta id="url_prefix" data-value="{{url_prefix}}">

	<link rel="manifest" href="{{ url_for('static', filename='json/pwa_manifest.json') }}">
	<link rel="apple-touch-icon" href="{{ url_for('static', filename='img/favicon.svg') }}">
	<meta name="apple-mobile-web-app-status-bar" content="#6b6b6b">
	<meta name="theme-color" content="#6b6b6b">

	<link rel="shortcut icon" href="{{ url_for('static', filename='img/favicon.svg') }}" type="image/x-icon">

	<link rel="stylesheet" href="{{ url_for('static', filename='css/general.css') }}">
	<link rel="stylesheet" href="{{ url_for('static', filename='css/login.css') }}">
	<script src="{{ url_for('static', filename='js/login.js') }}" defer></script>

	<title data-lang="title">Login - MIND</title>

	<style>
		.language-selector {
			position: absolute;
			top: 10px;
			right: 10px;
			font-size: 14px;
		}
	</style>
</head>

<body>
	<div class="language-selector">
		<a href="#" onclick="switchLanguage('en')">English</a> /
		<a href="#" onclick="switchLanguage('zh')">中文</a>
	</div>

	<header>
		<img src="{{ url_for('static', filename='img/favicon.svg') }}" alt="">
	</header>
	<main>
		<input type="checkbox" id="form-switch" class="hidden">

		<div class="form-container">
			<form id="login-form">
				<h2 data-lang="login-title">Login</h2>

				<noscript>Javascript is disabled. The web-ui of MIND does not work with JavaScript disabled.</noscript>

				<div id="username-error-container">
					<input type="text" autocomplete="username" placeholder="Username" required autofocus>
					<p class="hidden" data-lang="username-error">*Username not found</p>
				</div>

				<div id="password-error-container">
					<input type="password" autocomplete="current-password" placeholder="Password" required>
					<p class="hidden" data-lang="password-error">*Password incorrect</p>
				</div>

				<label for="form-switch" class="switch-button" data-lang="switch-create">Or create an account</label>
				<button type="submit" data-lang="login-button">Login</button>
			</form>
		</div>
		<div class="form-container">
			<form id="create-form">
				<h2 data-lang="create-title">Create</h2>

				<input type="text" autocomplete="username" placeholder="Username" required>
				<p class="error hidden" id="new-username-error" data-lang="new-username-error">*Username invalid</p>
				<p class="error hidden" id="taken-username-error" data-lang="taken-username-error">*Username already
					taken</p>

				<input type="password" autocomplete="new-password" placeholder="Password" required>

				<label for="form-switch" class="switch-button" data-lang="switch-login">Or log into an account</label>
				<button type="submit" data-lang="create-button">Create</button>
			</form>
		</div>
	</main>
	<script>
		const translations = {
			en: {
				"title": "Login - MIND",
				"login-title": "Login",
				"username-error": "*Username not found",
				"password-error": "*Password incorrect",
				"switch-create": "Or create an account",
				"login-button": "Login",
				"create-title": "Create",
				"new-username-error": "*Username invalid",
				"taken-username-error": "*Username already taken",
				"switch-login": "Or log into an account",
				"create-button": "Create"
			},
			zh: {
				"title": "登录 - MIND",
				"login-title": "登录",
				"username-error": "*用户名未找到",
				"password-error": "*密码错误",
				"switch-create": "或者创建一个账户",
				"login-button": "登录",
				"create-title": "创建",
				"new-username-error": "*用户名无效",
				"taken-username-error": "*用户名已被使用",
				"switch-login": "或者登录一个账户",
				"create-button": "创建"
			}
		};

		function switchLanguage(lang) {
			document.querySelectorAll("[data-lang]").forEach(element => {
				const key = element.getAttribute("data-lang");
				element.innerText = translations[lang][key];
			});
		}
	</script>
</body>

</html>